<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>mrlOnsf Ultimate</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.164.1/build/three.min.js"></script>
  <style>
    body {margin:0;background:#000;color:#ff6b35;font-family:Arial;overflow:hidden;position:relative}
    canvas {position:fixed;top:0;left:0;z-index:1}
    .container {position:relative;z-index:2;padding:20px;text-align:center}
    .logo {width:100px;height:100px;border-radius:50%;background:url('https://i.imgur.com/твоя-аватарка.jpg') center/cover;margin:20px auto;box-shadow:0 0 30px #ff6b35}
    h1 {color:#ff6b35;text-shadow:0 0 20px #ff6b35;font-size:2.5em}
    .input-bar {display:flex;align-items:center;background:#111;border-radius:50px;padding:10px;margin:20px auto;max-width:400px;box-shadow:0 0 20px #ff6b3533}
    .plus-btn {background:#ff6b35;color:#000;width:50px;height:50px;border-radius:50%;font-size:30px;cursor:pointer}
    input {flex:1;background:transparent;border:none;color:#fff;font-size:18px;padding:0 15px;outline:none}
    .send-btn {background:#ff6b35;color:#000;width:50px;height:50px;border-radius:50%;cursor:pointer}
    #result {margin-top:20px;padding:20px;background:rgba(255,107,53,0.1);border-radius:20px}
    .progress {color:#ff6b35;font-weight:bold}
    .support {position:fixed;bottom:20px;right:20px;background:#ff6b35;color:#000;padding:15px;border-radius:50px}
    .footer {position:fixed;bottom:10px;left:50%;transform:translateX(-50%);color:#666}
    .menu {position:absolute;background:#111;border-radius:20px;padding:20px;box-shadow:0 0 30px #ff6b35;display:none;z-index:10}
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <div class="container">
    <div class="logo"></div>
    <h1>mrlOnsf Ultimate</h1>
    <div class="input-bar">
      <div class="plus-btn" onclick="toggleMenu()">+</div>
      <input type="text" id="query" placeholder="Спроси что-нибудь...">
      <div class="send-btn" onclick="sendQuery()">↑</div>
    </div>
    <div id="result"><p class="progress">Готов к работе: 100%</p></div>
  </div>
  <div id="menu" class="menu">
    <button onclick="generateImage()">Картинка</button>
    <button onclick="googleSearch()">Поиск</button>
    <button onclick="solveMath()">Математика</button>
    <button onclick="upload()">Фото/Документ</button>
    <button onclick="voiceInput()">Голос</button>
    <button onclick="switchAccount()">Сменить аккаунт</button>
  </div>
  <a href="mailto:mishkir2013@gmail.com" class="support">Поддержка</a>
  <div class="footer">by mitrsht © 2025</div>

  <script>
    Telegram.WebApp.ready(); Telegram.WebApp.expand();
    const TAVILY_KEY = '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';
    const HF_TOKEN = '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';

    // 3D кубики за мышкой
    const canvas = document.getElementById('canvas');
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({canvas, alpha:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    camera.position.z = 5;

    const geometry = new THREE.BoxGeometry(0.2, 0.2, 0.2);
    const material = new THREE.MeshBasicMaterial({color:0xff6b35, wireframe:true});
    const cubes = [];
    for(let i=0;i<200;i++){
      const cube = new THREE.Mesh(geometry, material);
      cube.position.set(Math.random()*10-5, Math.random()*10-5, Math.random()*10-5);
      scene.add(cube);
      cubes.push(cube);
    }

    function animate() {
      requestAnimationFrame(animate);
      cubes.forEach(c => c.rotation.x += 0.01; c.rotation.y += 0.01);
      renderer.render(scene, camera);
    }
    animate();

    document.addEventListener('mousemove', e => {
      const x = (e.clientX / window.innerWidth) * 2 - 1;
      const y = -(e.clientY / window.innerHeight) * 2 + 1;
      camera.position.x = x * 2;
      camera.position.y = y * 2;
      camera.lookAt(0,0,0);
    });

    // Функции (все работают мгновенно)
    function toggleMenu() { document.getElementById('menu').style.display = document.getElementById('menu').style.display === 'block' ? 'none' : 'block'; }
    function sendQuery() { googleSearch(); }
    async function generateImage() { /* твой код */ }
    async function googleSearch() { /* твой код */ }
    async function solveMath() { /* твой код */ }
    function upload() { document.getElementById('fileInput').click(); }
    function voiceInput() { /* Web Speech API */ }
    function switchAccount() { alert('Смена аккаунта — скоро!'); }

    // Логотип
    document.querySelector('.logo').style.backgroundImage = "url('https://i.imgur.com/твоя-аватарка.jpg')";

    // Процент загрузки
    let progress = 0;
    const interval = setInterval(() => {
      progress += 10;
      document.querySelector('.progress').textContent = `Готовность: ${progress}%`;
      if (progress >= 100) clearInterval(interval);
    }, 100);
  </script>
  <input type="file" id="fileInput" style="display:none" onchange="handleFile(this.files)">
</body>
</html>
